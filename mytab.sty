\NeedsTeXFormat{LaTeX2e}[1999/01/01]
\ProvidesPackage{mytab}[2011/03/28]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Declare package options %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% For the intermediate bibliographies
\newif\if@smarttab \@smarttabfalse
\DeclareOption{smarttab}{\@smarttabtrue}
% In case of unknown options
\DeclareOption*{%
	\PackageWarning{mytab}{Unknown option `\CurrentOption'}%
}

\ProcessOptions

%% Options to pass to packages

%% Packages to call
% The biblatex is the best package to make bibliographies
\RequirePackage{multicol}
\RequirePackage{multirow}
\if@smarttab
	\RequirePackage{array}
	\RequirePackage{colortbl}
	\RequirePackage{booktabs}
\fi

%%%%%%%%%%%%%%%%%%%%%%%
%% New configuration %%
%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%
%% New commands %%
%%%%%%%%%%%%%%%%%%
\newenvironment{mytable}[1][htp]{%
		\begin{table}[#1]
		\centering
	}{%
		\end{table}
	}
\newenvironment{mytabular}[1]{%
		\begin{tabular}{#1}
	}{%
		\end{tabular}
	}
\newcommand{\mycaption}[2][tab-none]{\caption{#2}\label{#1}}
\if@smarttab
	\def\mytoprule{%
		\noalign{\ifnum0=‘}\fi%
		\@aboverulesep=\abovetopsep%
		\global\@belowrulesep=\belowrulesep%global cos for use in the next noalign
		\global\@thisruleclass=\@ne%
		\@ifnextchar[{\@BTrule}{\@BTrule[\heavyrulewidth]}%
	}
	\def\mymiddlerule{%
		\noalign{\ifnum0=‘}\fi%
		\@aboverulesep=\aboverulesep%
		\global\@belowrulesep=\belowrulesep%
		\global\@thisruleclass=\@ne%
		\@ifnextchar[{\@BTrule}{\@BTrule[\lightrulewidth]}%
	}
	\def\mybottomrule{%
		\noalign{\ifnum0=‘}\fi%
		\@aboverulesep=\aboverulesep%
		\global\@belowrulesep=\belowbottomsep%
		\global\@thisruleclass=\@ne%
		\@ifnextchar[{\@BTrule}{\@BTrule[\heavyrulewidth]}%
	}
	\def\mypartrule{\noalign{\ifnum0=‘}\fi
		\@ifnextchar[{\@cmidrule}{\@cmidrule[\cmidrulewidth]}
	}
	\def\@cmidrule[#1]{\@ifnextchar({\@@cmidrule[#1]}{\@@cmidrule[#1]()}}
	\def\@@cmidrule[#1](#2)#3{\@@@cmidrule[#3]{#1}{#2}}
	\def\@@@cmidrule[#1-#2]#3#4{
		\global\@cmidla#1\relax
		\global\advance\@cmidla\m@ne
		\ifnum\@cmidla>0\global\let\@gtempa\@cmidrulea\else
		\global\let\@gtempa\@cmidruleb\fi
		\global\@cmidlb#2\relax
		\global\advance\@cmidlb-\@cmidla
		\global\@thisrulewidth=#3
		\@setrulekerning{#4}
		\ifnum\@lastruleclass=\z@\vskip \aboverulesep\fi
		\ifnum0=‘{\fi}\@gtempa
		\noalign{\ifnum0=‘}\fi\futurenonspacelet\@tempa\@xcmidrule
	}
\fi

% End of package
\endinput
